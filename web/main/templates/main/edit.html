{% extends 'main/base2.html' %}

{% block title %}{{ object.title }} - Project{% endblock %}

{% load static %}

{% block content %}
<!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">-->

<link href="https://fonts.googleapis.com/css2?family=Metal+Mania&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Handlee&family=Metal+Mania&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'main/_assets/css/jquery-ui.css' %}">
<link rel="stylesheet" href="/resources/demos/style.css">

<h1>{{post.title}}</h1>
<!--style="display:none;"-->
<div id="json_data" style="display:none;">{{post.input_box}}
</div>

<style>
    li.box {
    position: relative;
    padding: 27px 0 43px;
    border-bottom: 1px solid #b7bdbf;
    }

    div.space {
    height : 50px;
    }

    div.canvas-outline {
        position: absolute;
        overflow: auto;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        height: 643px;

    }
    ul.js-bubbleList {
        position: relative;
        height: 643px;
        overflow: auto;
    }

    div.canvas-main {
        overflow: visible;
        position: relative;
        height: {{post.img_view.height}};
        margin: 0 auto;
        background-image: url('{{post.img_view.url}}');
        width: {{post.img_view.width}}px;
        height: {{post.img_view.height}}px;
        box-shadow: 2px 2px 10px rgba(0,0,0,1), 0 0 0 1px #ddd;
        -webkit-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
    }

    div.object {
        width: {{post.img_view.width}}px;
        height: 500px;
    }

    div.resizer {
        position: relative;
        margin: 0 auto;
    }
    div.post {
        float:left;
        width:150px;
        height:150px;
        padding:10px 0px 0px 20px;
        background-color:#f9d716;
        border:1px solid black;
        box-shadow:2px 2px 2px;
    }

    a.MetalMania{
        font-family: 'Metal Mania', cursive;
        position: relative;
        color: black;
        display: block;
        width: 100%;
        padding: 0.25rem 1.5rem;
        clear: both;
        font-weight: 400;
        text-align: inherit;
        white-space: nowrap;
        background-color: transparent;
        border: 0;
    }

    a.ArchitectsDaughter{
    font-family: 'Architects Daughter', cursive;
    position: relative;
    color: black;
    display: block;
    width: 100%;
    padding: 0.25rem 1.5rem;
    clear: both;
    font-weight: 400;
    text-align: inherit;
    white-space: nowrap;
    background-color: transparent;
    border: 0;
    }

    a.OpenSans{
    font-family: 'Open Sans', sans-serif;
    position: relative;
    color: black;
    display: block;
    width: 100%;
    padding: 0.25rem 1.5rem;
    clear: both;
    font-weight: 400;
    text-align: inherit;
    white-space: nowrap;
    background-color: transparent;
    border: 0;
    }

    div.form-control{
    width: 300px;
    }

  #selectable .ui-selecting { background: #FECA40; }
  #selectable .ui-selected { background: #F39814; color: white; }
  #selectable { list-style-type: none; margin: 0; padding: 0; }
  #selectable li {font-size: 1.4em;}

</style>

<div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Dropdown button
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="MetalMania" href="javascript:">MetalMania</a>
    <a class="ArchitectsDaughter" href="javascript:">Architects Daughter</a>
    <a class="OpenSans" href="javascript:">OpenSans</a>
  </div>
    <a href="javascript:" class="badge badge-info" id="font-plus">+</a>
    <a href="javascript:" class="badge badge-info" id="font-minus">-</a>
    <button name = "save" id="save"> Save </button>
</div>

<div class = "space"></div>

<div class="result"></div>


<div class="container" data-spy="scroll" data-offset="0">

<div class="row">

    <!--<canvas id="canvas-result" width={{post.img_view.width}}px height={{post.img_view.height}}px ></canvas>-->

<div class="col-lg-9">
<div id = "editor">
<div class="canvas-outline">
<div calss="canvas_resizer">
<div id="selectable" class="canvas-main" data-canvas="true" data-show-grid="false" data-show-memo="true">


</div>
</div>
</div>
</div>
</div>


<div class="col-lg-3">

    <ul class = "js-bubbleList"></ul>
</div>

</div>
</div>

<script src = "{% static 'main/js/test.js' %}"></script>
<script>
$(document).ready(function(){
    $("#selectable").selectable();
});
</script>

<script>
$('#save').click(function(){
    $.ajax({
		url : '{% url 'edit' post.pk %}',
		type : 'POST',
		dataType : 'json',
		data : {
		    'csrfmiddlewaretoken': '{{ csrf_token }}',
		    'input_box' : document.getElementById("json_data").innerText,
		},

    });
})
</script>

{% endblock %}
